<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>Paint - Project</title>

    <link rel="icon" type="image/svg+xml" href="../public/icons/Pepe.svg" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tahoma:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>

  <body class="bg-white p-4" style="font-family: 'Tahoma', sans-serif; background-image: url('../public/images/background.png');">

    <!-- Base Window Component -->
    <base-window title="Paint - Project">
      
      <!-- Menu Left -->
      <div slot="menu-left">
        <button id="file-btn" class="xp-button">
          File
        </button>
        <button id="draw-params-btn" class="xp-button">
          Draw Parameters
        </button>
        <button id="color-picker-btn" class="xp-button">
          Color Picker
        </button>
        <button id="image-processing-btn" class="xp-button">
          Image Processing
        </button>
        <button id="histogram-btn" class="xp-button">
          Histogram and Binarization
        </button>
      </div>

      <!-- Toolbox -->
      <div slot="toolbox" class="bg-[#ECE9D8]">
        <div class="flex flex-col gap-1 p-2">
          
          <button id="tool-select" class="xp-button-tool" title="Select">
            <i class="fas fa-mouse-pointer"></i>
          </button>

          <button id="tool-brush" class="xp-button-tool" title="Brush">
            <i class="fas fa-paint-brush"></i>
          </button>

          <button id="tool-line" class="xp-button-tool" title="Line">
            <i class="fas fa-minus rotate-45 mt-1"></i>
          </button>

          <button id="tool-rectangle" class="xp-button-tool" title="Rectangle">
            <i class="far fa-square"></i>
          </button>

          <button id="tool-circle" class="xp-button-tool" title="Circle">
            <i class="far fa-circle"></i>
          </button>

          <button id="zoom-btn" class="xp-button-tool" title="Zoom">
            <i class="fas fa-search"></i>
          </button> 

          <button id="tool-rgb-cube" class="xp-button-tool" title="Color Picker">
            <i class="fas fa-cube"></i>
          </button>

        </div>
      </div>

      <!-- Panels -->
      <div slot="panels">
        
        <!-- File Panel -->
        <div id="file-panel" class="hidden bg-[#ECE9D8] border-t border-[#808080] px-2 py-2">
          <div class="flex items-center gap-2 text-xs flex-wrap">
          
            <label class="flex items-center gap-1">
              <span>Select type:</span>
              <select id="param-file-type" class="xp-select">
                <option value="json">Json</option>
                <option value="ppm-p3">PPM-P3</option>
                <option value="ppm-p6">PPM-P6</option>
                <option value="jpeg">JPEG</option>
              </select>
            </label>

            <label id="compression-panel" class="hidden items-center gap-1">
              Compression:
              <input type="range" id="compression-slider" min="0" max="100" value="80" class="xp-slider">
              <span id="compression-value" class="text-xs">80</span>
            </label>

            <button id="save-file-btn" class="xp-button hidden">
              <i class="fas fa-save mr-1"></i>Save Drawing
            </button>
            
            <button id="load-file-btn" class="xp-button hidden">
              <i class="fas fa-folder-open mr-1"></i>Load Drawing
            </button>
            
            <input type="file" id="file-input" accept="" class="hidden">
            
            <button id="close-file-btn" class="xp-button text-red-500 font-bold">
              Close
            </button>
          </div>
        </div>

        <!-- Drawing Parameters Panel -->
        <div id="draw-params-panel" class="hidden bg-[#ECE9D8] border-t border-[#808080] px-2 py-2">
          <div class="flex items-center gap-2 text-xs flex-wrap">
            <label class="flex items-center gap-1">
              <span>Shape:</span>
              <select id="param-shape" class="xp-select">
                <option value="line">Line</option>
                <option value="rectangle">Rectangle</option>
                <option value="circle">Circle</option>
              </select>
            </label>
            
            <label class="flex items-center gap-1">
              <span>X1:</span>
              <input type="number" id="param-x1" placeholder="0" class="xp-input">
            </label>
            
            <label class="flex items-center gap-1">
              <span>Y1:</span>
              <input type="number" id="param-y1" placeholder="0" class="xp-input">
            </label>
            
            <label class="flex items-center gap-1">
              <span>X2:</span>
              <input type="number" id="param-x2" placeholder="100" class="xp-input">
            </label>
            
            <label class="flex items-center gap-1">
              <span>Y2:</span>
              <input type="number" id="param-y2" placeholder="100" class="xp-input">
            </label>
            
            <button id="draw-shape-btn" class="xp-button text-green-500 font-bold">
              Draw
            </button>
            
            <button id="close-params-btn" class="xp-button text-red-500 font-bold">
              Close
            </button>
          </div>
        </div>

        <!-- Edit Shape Panel -->
        <div id="edit-shape-panel" class="hidden bg-[#ECE9D8] border-t border-[#808080] px-2 py-2">
          <div class="flex items-center gap-2 text-xs flex-wrap">
            <span>Editing: <span id="edit-shape-type" class="font-bold text-blue-500">-</span></span>
            
            <label class="flex items-center gap-1">
              <span>X1:</span>
              <input type="number" id="edit-x1" placeholder="0" class="xp-input">
            </label>
            
            <label class="flex items-center gap-1">
              <span>Y1:</span>
              <input type="number" id="edit-y1" placeholder="0" class="xp-input">
            </label>
            
            <label class="flex items-center gap-1">
              <span>X2:</span>
              <input type="number" id="edit-x2" placeholder="100" class="xp-input">
            </label>
            
            <label class="flex items-center gap-1">
              <span>Y2:</span>
              <input type="number" id="edit-y2" placeholder="100" class="xp-input">
            </label>
            
            <button id="update-shape-btn" class="xp-button text-green-500 font-bold">
              <i class="fas fa-check mr-1"></i>Update Shape
            </button>
            
            <button id="close-edit-btn" class="xp-button text-red-500 font-bold">
              Close
            </button>
          </div>
        </div>

        <!-- Zoom Panel -->
        <div id="zoom-panel" class="hidden bg-[#ECE9D8] border-t border-[#808080] px-2 py-2">
          <div class="flex items-center gap-2 text-xs flex-wrap">

            <button id="zoom-in-btn" class="xp-button">+</button>
            <button id="zoom-out-btn" class="xp-button">--</button>
            <span id="zoom-value">100%</span>
            <button id="zoom-reset-btn" class="xp-button">Reset</button>

            <span class="ml-4 font-bold">|</span>

            <label class="flex ml-4 mr-2 items-center gap-1">
              Pixel Values:
              <span id="zoom-r-label" class="ml-2">R:
                <span id="zoom-r-value">0</span>
              </span>
              <span id="zoom-g-label" class="ml-2">G:
                <span id="zoom-g-value">0</span>
              </span>
              <span id="zoom-b-label" class="ml-2">B:
                <span id="zoom-b-value">0</span>
              </span>
            </label>
            
            <button id="close-zoom-btn" class="xp-button text-red-500 font-bold">
              Close
            </button>

          </div>
        </div>

        <!-- Color Picker Panel  -->
        <div id="color-picker-panel" class="hidden bg-[#ECE9D8] border-t border-[#808080] px-2 py-2">
          <div class="flex items-center gap-2 text-xs flex-wrap">
            
            <label class="flex items-center gap-1">
              <span>Choose Color:</span>
              <select id="color-style-select" class="xp-select">
                <option value="color-style-rgb">RGB</option>
                <option value="color-style-cmyk">CMYK</option>
              </select>

              <input type="checkbox" id="color-picker-checkbox" class="xp-checkbox ml-4">
              <span>Text</span>
            </label>

            <span class="font-bold ml-4">|</span>

            <label id="color-rgb-slider-label" class="hidden flex items-center gap-1 ml-4">
              <span>R:</span>
              <input type="range" id="color-r-slider" min="0" max="255" value="0" class="xp-slider w-24">
              <span id="color-r-slider-value" class="w-6 text-xs">0</span>

              <span>G:</span>
              <input type="range" id="color-g-slider" min="0" max="255" value="0" class="xp-slider w-24">
              <span id="color-g-slider-value" class="w-6 text-xs">0</span>

              <span>B:</span>
              <input type="range" id="color-b-slider" min="0" max="255" value="0" class="xp-slider w-24">
              <span id="color-b-slider-value" class="w-6 text-xs">0</span>
            </label>

            <label id="color-cmyk-slider-label" class="hidden flex items-center gap-1 ml-4">
              <span>C:</span>
              <input type="range" id="color-c-slider" min="0" max="255" value="0" class="xp-slider w-24">
              <span id="color-c-slider-value" class="w-6 text-xs">0</span>

              <span>M:</span>
              <input type="range" id="color-m-slider" min="0" max="255" value="0" class="xp-slider w-24">
              <span id="color-m-slider-value" class="w-6 text-xs">0</span>

              <span>Y:</span>
              <input type="range" id="color-y-slider" min="0" max="255" value="0" class="xp-slider w-24">
              <span id="color-y-slider-value" class="w-6 text-xs">0</span>
              
              <span>K:</span>
              <input type="range" id="color-k-slider" min="0" max="255" value="0" class="xp-slider w-24">
              <span id="color-k-slider-value" class="w-6 text-xs">0</span>
            </label>

            <label id="color-rgb-text-label" class="hidden flex items-center gap-1 ml-4">
              <span>R:</span>
              <input type="number" id="color-r-input" min="0" max="255" value="0" class="xp-input w-16">

              <span>G:</span>
              <input type="number" id="color-g-input" min="0" max="255" value="0" class="xp-input w-16">

              <span>B:</span>
              <input type="number" id="color-b-input" min="0" max="255" value="0" class="xp-input w-16">
            </label>

            <label id="color-cmyk-text-label" class="hidden items-center gap-1 ml-4">
              <span>C:</span>
              <input type="number" id="color-c-input" min="0" max="255" value="0" class="xp-input w-16">

              <span>M:</span>
              <input type="number" id="color-m-input" min="0" max="255" value="0" class="xp-input w-16">

              <span>Y:</span>
              <input type="number" id="color-y-input" min="0" max="255" value="0" class="xp-input w-16">

              <span>K:</span>
              <input type="number" id="color-k-input" min="0" max="255" value="0" class="xp-input w-16">
            </label>

            <div id="color-preview" class="inline-block w-16 h-7 border-2 border-[#404040]" style="background-color: #000000;"></div>

            <button id="close-color-picker-btn" class="xp-button text-red-500 font-bold ml-4">
              Close
            </button>
          </div>

        </div>

        <!-- Rotate Cube Panel -->
        <div id="rotate-cube-panel" class="hidden bg-[#ECE9D8] border-t border-[#808080] px-2 py-2">
          <div class="flex items-start gap-4 text-xs">
            
            <!-- Left side: Rotation controls -->
            <div class="flex flex-col gap-2">
              <span class="font-bold">Rotate Cube:</span>
              <label class="flex items-center gap-1">
                <span class="w-8">X:</span>
                <input type="range" id="rotate-x-slider" min="-180" max="180" value="0" class="xp-slider w-32">
                <span id="rotate-x-value" class="w-12 text-xs">0°</span>
              </label>
              <label class="flex items-center gap-1">
                <span class="w-8">Y:</span>
                <input type="range" id="rotate-y-slider" min="-180" max="180" value="0" class="xp-slider w-32">
                <span id="rotate-y-value" class="w-12 text-xs">0°</span>
              </label>
            </div>

            <span class="font-bold">|</span>

            <!-- Middle: Slice controls -->
            <div class="flex flex-col gap-2">
              <span class="font-bold">Cube Slice:</span>
              <label class="flex items-center gap-1">
                <span class="w-12">Axis:</span>
                <select id="slice-axis-select" class="xp-select">
                  <option value="x">Red (X)</option>
                  <option value="y">Green (Y)</option>
                  <option value="z" selected>Blue (Z)</option>
                </select>
              </label>
              <label class="flex items-center gap-1">
                <span class="w-12">Position:</span>
                <input type="range" id="slice-position-slider" min="0" max="100" value="50" class="xp-slider w-32">
                <span id="slice-position-value" class="w-12 text-xs">50%</span>
              </label>
            </div>

            <span class="font-bold">|</span>

            <!-- Right side: Slice preview -->
            <div class="flex flex-col gap-2 items-center">
              <span class="font-bold">Slice Preview:</span>
              <canvas id="slice-canvas" width="200" height="200" class="border-2 border-[#404040]"></canvas>
            </div>

            <button id="close-rotate-cube-btn" class="xp-button text-red-500 font-bold ml-4">Close</button>
          </div>
        </div>

        <!-- Image Processing Panel -->
        <div id="image-processing-panel" class="hidden bg-[#ECE9D8] border-t border-[#808080] px-2 py-2">
          <div class="flex flex-col gap-3 text-xs">
            
            <!-- Row 1: Add/Subtract operations -->
            <div class="flex items-center gap-2 flex-wrap">
              <span class="font-bold">Add/Subtract:</span>
              <label class="flex items-center gap-1">
                <span>R:</span>
                <input type="number" id="add-r" placeholder="0" min="-255" max="255" value="0" class="xp-input w-16">
              </label>
              <label class="flex items-center gap-1">
                <span>G:</span>
                <input type="number" id="add-g" placeholder="0" min="-255" max="255" value="0" class="xp-input w-16">
              </label>
              <label class="flex items-center gap-1">
                <span>B:</span>
                <input type="number" id="add-b" placeholder="0" min="-255" max="255" value="0" class="xp-input w-16">
              </label>
              <button id="btn-add" class="xp-button text-green-600">
                <i class="fas fa-plus mr-1"></i>Add
              </button>
              <button id="btn-subtract" class="xp-button text-orange-600">
                <i class="fas fa-minus mr-1"></i>Subtract
              </button>
            </div>

            <div class="border-t border-[#808080]"></div>

            <!-- Row 2: Multiply/Divide operations -->
            <div class="flex items-center gap-2 flex-wrap">
              <span class="font-bold">Multiply/Divide:</span>
              <label class="flex items-center gap-1">
                <span>R:</span>
                <input type="number" id="mult-r" placeholder="1.0" step="0.1" value="1.0" class="xp-input w-16">
              </label>
              <label class="flex items-center gap-1">
                <span>G:</span>
                <input type="number" id="mult-g" placeholder="1.0" step="0.1" value="1.0" class="xp-input w-16">
              </label>
              <label class="flex items-center gap-1">
                <span>B:</span>
                <input type="number" id="mult-b" placeholder="1.0" step="0.1" value="1.0" class="xp-input w-16">
              </label>
              <button id="btn-multiply" class="xp-button text-purple-600">
                <i class="fas fa-times mr-1"></i>Multiply
              </button>
              <button id="btn-divide" class="xp-button text-pink-600">
                <i class="fas fa-divide mr-1"></i>Divide
              </button>
            </div>

            <div class="border-t border-[#808080]"></div>

            <!-- Row 3: Brightness -->
            <div class="flex items-center gap-2 flex-wrap">
              <span class="font-bold">Brightness:</span>
              <label class="flex items-center gap-1">
                <span>Value:</span>
                <input type="range" id="brightness-slider" min="-255" max="255" value="0" class="xp-slider w-48">
                <span id="brightness-value" class="w-12">0</span>
              </label>
              <button id="btn-brightness" class="xp-button text-yellow-600">
                <i class="fas fa-sun mr-1"></i>Apply
              </button>
            </div>

            <div class="border-t border-[#808080]"></div>

            <!-- Row 4: Grayscale -->
            <div class="flex items-center gap-2 flex-wrap">
              <span class="font-bold">Grayscale:</span>
              <button id="btn-grayscale-avg" class="xp-button">
                Average
              </button>
              <button id="btn-grayscale-lum" class="xp-button">
                Luminance
              </button>
              <button id="btn-grayscale-des" class="xp-button">
                Desaturation
              </button>
            </div>

            <div class="border-t border-[#808080]"></div>

            <!-- Row 5: Filters -->
            <div class="flex items-center gap-2 flex-wrap">
              <span class="font-bold">Filters:</span>
              <button id="btn-smoothing-filter" class="xp-button text-indigo-600">
                <i class="fas fa-magic mr-1"></i>Smoothing
              </button>
              <button id="btn-median-filter" class="xp-button text-teal-600">
                <i class="fas fa-filter mr-1"></i>Median
              </button>
              <button id="btn-sobel-filter" class="xp-button text-cyan-600">
                <i class="fas fa-border-style mr-1"></i>Sobel Edge
              </button>
              <button id="btn-sharpen-filter" class="xp-button text-red-600">
                <i class="fas fa-adjust mr-1"></i>Sharpen
              </button>
              <button id="btn-gaussian-filter" class="xp-button text-blue-600">
                <i class="fas fa-cloud mr-1"></i>Gaussian Blur
              </button>
            </div>

            <div class="border-t border-[#808080]"></div>

            <!-- Row 6: Utility buttons -->
            <div class="flex items-center gap-2 flex-wrap">
              <button id="btn-reset-image" class="xp-button text-blue-600">
                <i class="fas fa-undo mr-1"></i>Reset to Original
              </button>
              <button id="close-image-processing-btn" class="xp-button text-red-500 font-bold">
                Close
              </button>
            </div>
          </div>
        </div>

        <!-- Histogram Panel -->
        <div id="histogram-panel" class="hidden bg-[#ECE9D8] border-t border-[#808080] px-2 py-2">
          <div class="flex flex-col gap-3 text-xs">
            
            <div class="flex items-center gap-2 flex-wrap">
              <span class="font-bold">Operations:</span>
              <button id="btn-stretch-histogram" class="xp-button text-lime-600">
                <i class="fas fa-arrows-alt-h mr-1"></i>Stretch Histogram
              </button>
              <button id="btn-equalize-histogram" class="xp-button text-green-600">
                <i class="fas fa-equals mr-1"></i>Equalize Histogram
              </button>
            </div>

            <div class="border-t border-[#808080]"></div>

            <div class="flex flex-col gap-2">
              <span class="font-bold">Histogram Visualization:</span>
              <div class="flex gap-4 items-start flex-wrap">
                <div class="flex flex-col gap-1">
                  <span class="text-xs font-bold text-red-600">Red Channel</span>
                  <canvas id="histogram-r" width="256" height="100" class="border border-[#808080] bg-white"></canvas>
                </div>
                <div class="flex flex-col gap-1">
                  <span class="text-xs font-bold text-green-600">Green Channel</span>
                  <canvas id="histogram-g" width="256" height="100" class="border border-[#808080] bg-white"></canvas>
                </div>
                <div class="flex flex-col gap-1">
                  <span class="text-xs font-bold text-blue-600">Blue Channel</span>
                  <canvas id="histogram-b" width="256" height="100" class="border border-[#808080] bg-white"></canvas>
                </div>
              </div>
            </div>

            <div class="border-t border-[#808080]"></div>

            <div class="flex flex-col gap-2">
              <span class="font-bold">Binarization:</span>
              
              <div class="flex items-center gap-2 flex-wrap">
                <span class="text-xs">Manual Threshold:</span>
                <label class="flex items-center gap-1">
                  <span>Threshold:</span>
                  <input type="range" id="binarize-threshold-slider" min="0" max="255" value="128" class="xp-slider w-48">
                  <span id="binarize-threshold-value" class="w-12">128</span>
                </label>
                <button id="btn-binarize-manual" class="xp-button text-purple-600">
                  <i class="fas fa-adjust mr-1"></i>Apply Manual
                </button>
              </div>

              <div class="flex items-center gap-2 flex-wrap">
                <span class="text-xs">Automatic Methods:</span>
                <label class="flex items-center gap-1">
                  <span>% Black:</span>
                  <input type="number" id="percent-black-input" min="0" max="100" value="50" step="1" class="xp-input w-16">
                </label>
                <button id="btn-binarize-percent" class="xp-button text-indigo-600">
                  <i class="fas fa-percentage mr-1"></i>Percent Black
                </button>
                <button id="btn-binarize-mean" class="xp-button text-teal-600">
                  <i class="fas fa-sync mr-1"></i>Mean Iterative
                </button>
              </div>
            </div>

            <div class="border-t border-[#808080]"></div>

            <div class="flex items-center gap-2 flex-wrap">
              <button id="btn-reset-histogram" class="xp-button text-blue-600">
                <i class="fas fa-undo mr-1"></i>Reset to Original
              </button>
              <button id="close-histogram-btn" class="xp-button text-red-500 font-bold">
                Close
              </button>
            </div>
          </div>
        </div>

      </div>

    </base-window>
    
    <!-- Modal Component -->
    <modal-window></modal-window>

    <!-- Logic -->
    <script type="module" src="../src/projects/project.ts"></script>
  </body>
</html>